# 1 基础概念

测试计划，是jmeter脚本的根，为执行一系列测试操作和工具提供了一个框架，测试计划包括如下组件

1. thread groups  控制并发量
2. logic controllers
3.  sampler 以何种协议方式采样
4. listeners 对采样行为进行监听
5. timers
6. assertions
7. configuration elements

## 1.1 Jmeter组件

​	jmeter将功能分成各类组件，各组件提供多个元件来实现功能，通过不同的元件选择，完成测试任务。

### 1.1.1 配置元件---Config Element

　　用于初始化默认值和变量，以便后续采样器使用。配置元件对其作用域的初始阶段处理，配置元件仅对其所在的测试树分支有效，如，在同一个作用域的任何采样器前。

### 1.1.2 前置处理器--- Pre Processors

　　前置处理器会在采样器发出请求之前做一些特殊操作。如果前置处理器附着在某个采样器之下，那么它只会在该采样器运行之前执行。前置处理器通常用于在采样器发出请求前修改采样器的某些设置，或者更新某些变量的值（这些变量不在服务器响应中获取值）。

### 1.1.3 计时器---Timer

　　定时器会让作用域内的每一个采样器都在执行前等待一个固定时长，如果不设定这种延迟，JMeter可能会在短时间内产生大量访问请求，导致服务器被大量请求所淹没。如果为线程组添加了多个定时器，那么JMeter会将这些定时器的时长叠加起来，共同影响作用域范围内的采样器。定时器可以作为采样器或者逻辑控制器的子项，目的是只影响作用域内的采样器。

### 1.1.4 采样器---sampler

　　采样器告诉JMeter发送一个请求到指定服务器，并等待服务器的请求。采样器会按照其在测试树中的顺序去执行，还可以用逻辑控制器来改变采样器运行的重复次数。

### 1.1.5 后置处理器---Post Processors

　　后置处理器会在采样器发出请求之后做一些特殊操作。如果后置处理器附着在某个采样器之下，那么它只会在该采样器运行之后执行。后置处理器通常被用来处理服务器的响应数据，特别是服务器响应中提取数据。

### 1.1.6 断言---Assertions

　　用户可以使用断言来检查从服务器获得的响应内容。通过断言可以测试服务器返回的响应与测试人员的期望是否相符

### 1.1.7 监听器---Listener

　　监听器提供了对JMeter在测试期间收集到的信息的访问方法。"图形结果"监听器会将系统响应时长绘制在一张图片之中。"查看结果树"监听器会展示采样器请求和响应的细节，还可以将测试数据导入到文件之中，以供后续分析。

### 1.1.8 逻辑控制器---Controller

　　逻辑控制器可以帮助用户控制JMeter的测试逻辑，特别是何时发送请求。逻辑控制器可以改变其子测试元件的请求执行顺序。

### 1.1.9 测试片段-- test Fragment 

​	不能直接执行，必须通过逻辑控制器中的Include_Controller 或者模块控制器来调用。添加下级组件的方法与线程组相同（可以简单理解为不能执行的线程组）。

​	在模块化脚本构建中会很好用。比如：将登录脚本保存为一个Test Fragment, 然后就可以在其他所有需要登录的测试脚本中调用这个Test Fragment，而不需要在每个测试脚本中都再写一个登录过程。（特别是测试脚本多，而登录脚本有变动的时候，只需要修改登录的Test Fragment，大大减少工作量啊）

### 1.1.10 线程组

一个测试计划至少有一个线程组

## 1.2 组件执行顺序：

测试计划的元素执行是有序的，通过以下方式执行：

- 配置元件（Config Element）
- 前置处理器（Pre Processors）
- 定时器（Timer）
- 取样器（sampler）
- 后置处理器（Post Processors，只在有结果可用情况下执行）
- 断言（Assertions，只在有结果可用情况下执行）
- 监听器（Listener，只在有结果可用情况下执行）

## 1.3元件

组件包括多个元件，组件是元件集合，功能由元件实现

## 1.4 组件作用域

元件收集其作用范围的每一个sampler元件的信息并呈现，在jmeter中，元件的作用域是靠测试计划的的树型结构中元件的父子关系来确定的，作用域的原则是： 

采样器（sampler）：和其它组件无关
逻辑控制器（Logic Controller）：该类元件只对其子节点中的取样器 和 逻辑控制器作用。
除采样器 和 逻辑控制器 元件外，其他6类元件，如果是某个sampler的子节点，则该元件只对其父子节点起作用。
除采样器和逻辑控制器元件外的其他6类元件，如果其父节点不是sampler ，则其作用域是该元件父节点下的其他所有后代节点（包括子节点，子节点的子节点等）。


四、特殊说明：

 配置元件（Config Elemnet）-->用户自定义变量组件（User Defined Variables）：这个组件不管放在哪个位置，它定义的变量都会被整个线程所共享。

由上可知：在one下面定义的用户变量，在debug sampler和two处都能正常使用。